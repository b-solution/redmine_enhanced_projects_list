<table class="list">
  <thead>
    <tr>
      <th>identifier</th>
      <% Project.column_names.select{|col| @settings[col.to_sym] }.each do |column| %>
              <th> <%= l("field_#{column}".to_sym) %></th>
      <% end %>
      <% CustomField.where(type: "ProjectCustomField").select{|col| @settings[col.name.to_sym] }.each do |cf| %>
          <th>  <%= cf.name %> </th>
      <% end  %>
    </tr>
  </thead>
  <tbody>
  <% @projects.each do |project| %>
    <tr class="hascontextmenu <%= cycle('odd', 'even')%>" >
      <td> <%= link_to project.identifier, project_path(project) %></td>
      <% Project.column_names.select{|col| @settings[col.to_sym] }.each do |column| %>
              <td> <%= project[column.to_sym]%></td>
      <% end %>

         <% project.visible_custom_field_values.select{|coll| @settings[coll.custom_field.name.to_sym] }.each do |custom_value| %>
          <td>
            <% unless custom_value.value.blank? %>
                 <%= h show_value(custom_value) %>
            <% end %>
          </td>
          <% end %>
    </tr>
  <% end %>
  </tbody>
</table>